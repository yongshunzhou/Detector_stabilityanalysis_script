# Detector_stabilityanalysis_script
Scripts used in ProtoDUNE-SP detector stability analysis are listed here. 
I will briefly explain the function of each file, and how each of them works.

StabilityDet_module.cc:

This is the module script we used to extract data of certain reconstructed quantity from the reconstructed root files.
Since we have many data in one event, many events in each file, and many files in each run, the script works on different levels one after another.
The script creates tree branches first (begin job), 
creates histograms where data from files are temporarily stored for further calculation (begin run), 
extracts data from each root file and stores them into the corresponding histograms (analyze), 
calculates mean/RMS of data in each file and adds together mean/RMS data from files of the same run (end run), 
gets mean of data over all files and stores the result into the corresponding branches (end job).

StabilityDet_module_MC.cc:

This is the module script we used to extract data from Monte Carlo files. 
It is generally the same as StabilityDet_module.cc.
Modifications are made because we don’t have different “run numbers” for Monte Carlo.

stabilitydet.fcl:

This is the fickle file we used to run the module script in dunegpvm.
Note that, in order to run the module successfully, the name of the module must be “StabilityDet_module.cc”. 
I uploaded StabilityDet_module_MC.cc with a changed name to make a difference; when using, please change its name back to “StabilityDet_module.cc”.

listFiles10perRun.sh:

This is the bash script we used to get the list of files for analysis. 
It is now written to get the location of files with certain tags (qualified files), and it will get the first 10 files for each run (of course, only runs with more than 10 qualified files will be included).
To change the script for other use, instructions are included in the script as comments.

Runlist_goodbeam.txt:

This is an example of the output of listFiles10perRun.sh. 
In order to run the module script in dunegpvm, put the script_module.cc file, runlist.txt file and stabilitydet.fcl file in the same directory, and type “lar -c stabilitydet.fcl -S runlist.txt”, and it will run over all files included in the runlist.txt. To run over only a few events, for instance, 10 events, type “lar -c stabilitydet.fcl -S runlist.txt -n 10”.

Plots_StabilityDet.C:

This is the script we used to generate plots of reconstructed quantities as a function of run numbers (time). 
The root files as the source of our data are generated by the StabilityDet_module.cc.
Please change the directory of input files and output files when using on other computers.
